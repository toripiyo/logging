doctype html
html(lang="en", ng-app)
    head
        meta(charset="utf-8")
        title Logging Tool
        //- link(rel="stylesheet", href="css/app.css")
        link(rel="stylesheet", href="css/bootstrap.css")
        script(src="./angular.js")
        script(src="./ctrl/recordctrl.js")
        script(src="./ctrl/eyesctrl.js")
        script(src="./ctrl/dayctrl.js")
        script.
            var check = function() {
                alert(#{data});
                //- alert(#{days});
                //- alert(#{test});
            }
    body
        div(class="container-fluid", ng-app)
            h1 Logging Tool
            div(class="row-fluid")
                div(class="span2")
                    div(ng-controller="DayCtrl")
                        div(ng-init="days=#{days}")
                            table
                                tr
                                    td
                                        h3 days
                                tr(ng-repeat="day in days")
                                    td
                                        label
                                            input(type="checkbox", name="{{day.link}}")
                                            a(href="/logging?days={{day.link}}") {{day.title}}
                            div
                                button(ng-clike="calculateRecord()") calculate

                    div(ng-controller="EyesCtrl")
                        table
                            tr
                                td
                                    h3 eyes content
                            tr(ng-repeat="eye in eyes")
                                td {{eye.content}}

                div(class="span10", ng-controller="RecordCtrl")
                    div(ng-init="day=#{day}")
                        h3 {{day}}
                        div(ng-init="initRecord([#{data}])")
                            table
                                tr
                                    td from
                                    td to
                                    td duration
                                    td activity
                                    td eyes
                                tr(ng-repeat="record in records")
                                    td
                                        input(type="text", ng-model="records[($index)].from", required)
                                    td
                                        div(ng-if="$last == true")
                                            input(type="text", ng-model="records[($index)].to", required)
                                        div(ng-if="$last == false") {{ calculateTo($index) }}
                                    td 
                                        div {{calculateDuration($index)}}
                                    td
                                        input(type="text", ng-model="records[($index)].activity", required)
                                    td
                                        input(type="text", ng-model="records[($index)].code", required)
                                    td
                                        button(ng-click="updateForm($index)") current time
                                    td
                                        button(ng-click="insertRecord($index)") +
                                    td
                                        button(ng-click="deleteRecord($index)") -
                            div
                                button(ng-click="saveRecord()") save
                            div {{records}}

